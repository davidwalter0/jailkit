INSTALL = @INSTALL@
prefix = @prefix@

SRCS = jailkit.8 jk_chrootsh.8 jk_uchroot.8 jk_lsh.8 jk_socketd.8 jk_init.8 jk_check.8 jk_cp.8 jk_chrootlaunch.8 jk_procmailwrapper.8 jk_addjailuser.8 jk_jailuser.8 jk_list.8 jk_update.8
OBJS = $(SRCS:.8=.8.gz)

#%.8.gz : %.8
#	gzip -9 > $@ < $<

#.SUFFIXES: .8 .8.gz
#	gzip -9 > $@ < $<

#.in.default:
#all: ${SRCS}
#	for file in ${SRCS} ; do \
#		gzip < $${file} > $${file}.gz ;\
#	done

jailkit.8.gz:
	gzip -9 < jailkit.8 > jailkit.8.gz

jk_chrootsh.8.gz:
	gzip -9 < jk_chrootsh.8 > jk_chrootsh.8.gz

jk_uchroot.8.gz:
	gzip -9 < jk_uchroot.8 > jk_uchroot.8.gz

jk_lsh.8.gz:
	gzip -9 < jk_lsh.8 > jk_lsh.8.gz

jk_socketd.8.gz:
	gzip -9 < jk_socketd.8 > jk_socketd.8.gz

jk_init.8.gz:
	gzip -9 < jk_init.8 > jk_init.8.gz

jk_check.8.gz:
	gzip -9 < jk_check.8 > jk_check.8.gz

jk_cp.8.gz:
	gzip -9 < jk_cp.8 > jk_cp.8.gz

jk_chrootlaunch.8.gz:
	gzip -9 < jk_chrootlaunch.8 > jk_chrootlaunch.8.gz

jk_procmailwrapper.8.gz:
	gzip -9 < jk_procmailwrapper.8 > jk_procmailwrapper.8.gz

jk_jailuser.8.gz:
	gzip -9 < jk_jailuser.8 > jk_jailuser.8.gz

jk_addjailuser.8.gz:
	gzip -9 < jk_addjailuser.8 > jk_addjailuser.8.gz

jk_list.8.gz:
	gzip -9 < jk_list.8 > jk_list.8.gz

jk_update.8.gz:
	gzip -9 < jk_update.8 > jk_update.8.gz

jailkit: ${OBJS}

all: jailkit
	
install: jailkit
	${INSTALL} -d -m 755 ${DESTDIR}${prefix}/share/man/man8/
	for file in ${OBJS} ; do \
		${INSTALL} -m 0644 $${file} ${DESTDIR}${prefix}/share/man/man8/ ;\
	done

uninstall:
	for file in ${OBJS} ; do \
		rm -f ${prefix}/share/man/man8/$${file} ;\
	done

clean:
	rm -f *.gz
	rm -f *~

distclean: clean
	rm -f Makefile
